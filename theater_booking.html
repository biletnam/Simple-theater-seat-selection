<!-------------------------------------------------------------------+
   | @author	:	Prasad Gayan									|
   | @version	: 	1.0                         					|
   | Description: 	Sample seat selaection for movie booking syetem	|                                       |
   | Date		: 	2016/01/11                                     	|
   |                                               					|
   +-----------------------------------------------------------------+ -->	

<html>
<head>
<title>Seat booking</title>

<link href="style.css" rel="stylesheet" type="text/css" />

<script src="js/jquery.min.js"></script>

<script>
$(document).ready(function(){
				
				var seat_num ;
				var total_bill 		= 0 ;
				var pricePerTicked 	= 350;
				var maximumSeats	=	5;
				
				$('#bookNowButton').hide(); // hide booking button
				
				$('.seat').each(function() {		
					var column_num = parseInt( $(this).index() ) + 1;
        			var row_num = parseInt( $(this).parent().index() )+1;    
					seat_num = row_num+"-"+column_num ;  
					$(this).text(seat_num); // numbering seats
					$(this).addClass("seat"+seat_num);  // add seat number as class to 
				});
				
				$("#seats .seat").click(function() {  
						$('#errMsg').html('');
						if($(this).hasClass('select')){ // check is already selected
							// following code will run if click on already selected class
							
							$(this).removeClass('select'); // if selected remove 'select' class
							$(this).css('background-color','#D8D8D8'); // revert background
							
							var currentSeatClass = $(this).attr('class').split(' ')[1]; //get second class of clicked element: seat number
							
							console.log(currentSeatClass);
							
							//$( "#selected_seat" ).remove('.'+currentSeatClass);
							 $( "#selected_seat ."+currentSeatClass ).remove();
							
						}else if($(".your_selected_seat").length<maximumSeats && !$(this).hasClass('select')){ // check for five seats  & if already selected
							$(this).css('background-color','#71DCAA'); // add background color
							$(this).addClass("select"); // add selected class
							
							
							var column_num = parseInt( $(this).index() ) + 1;
							var row_num = parseInt( $(this).parent().index() )+1;    
							
							//$("#selected_seat").html( "Row_num =" + row_num + "  ,  Rolumn_num ="+ column_num );  
							$( "#selected_seat" ).append("<span class='your_selected_seat seat"+row_num+"-"+column_num+" '> Seat number: <b style='color:#EAABFF'>" + row_num+"-"+column_num +"</b> </br></span>");
						}else {
							$('#errMsg').html('Sorry!, You can only book 5 seats at a time.');
							//alert(" Sorry!, You can only book 5 seats at a time.");	
						}
						
						if($(".your_selected_seat").length){
							$('#bookNowButton').fadeIn(1000);
						}else {
							$('#bookNowButton').fadeOut(1000);
						}
						//count total value
						total_bill = $(".your_selected_seat").length * pricePerTicked;
						$('#total > span').html(total_bill);
				});
				
			
	//}
	

});
</script>
</head>
<body>		
			<p>
            	<br>
            	<h1> Seates Booking </h1>
            </p>
            
            <!--BOOKING SECTION START-->
            
            <div style="width:900px;margin: 0 auto;">
            <span id='screen'>Screen</span>
        
            <div id="seats">
                <div class="seatsRaw">
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                </div>
                
                <div class="seatsRaw">
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                </div>
                
                <div class="seatsRaw">
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                </div>
                
                <div class="seatsRaw">
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                </div>
                
                <div class="seatsRaw">
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                </div>
                
                <div class="seatsRaw">
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                </div>
                <div class="seatsRaw">
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                </div>
                <div class="seatsRaw">
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                    <div class="seat"></div>
                </div>
            
            </div>
            
              <div id="booking_desc">
            	<div class="booking_left">
                	<p style="color: #FBBC53;font-weight: bold; font-size: larger;">Your selected Seat/s </p>
                	<div id="selected_seat"></div>
                    <br>
                    <button id="bookNowButton" type="button" >Book Now</button>
                    <div id="errMsg"></div>
                </div>
                
                <div class="booking_right">Price per seat: Rs.300.00
                	<br><br>
                	<div id="total">Your total: Rs.<span> 0 </span></div>
            	</div>
           	 </div>
            
            
        </div>
            
          
        
</html>